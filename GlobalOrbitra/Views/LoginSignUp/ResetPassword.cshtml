@{
    ViewData["Title"] = "Şifre Yenile";
}
<link href="~/css/login-signup.css" rel="stylesheet" />

<div class="auth-wrapper">
    <div class="login-box">
        <h1>Yeni Şifre Belirle</h1>

        <form method="post" asp-action="ResetPasswordPost">
            @Html.AntiForgeryToken()

            <input type="hidden" name="userId" value="@TempData["UserId"]" />

            <div class="password-wrapper">
                <input type="password" name="NewPassword" placeholder="Yeni Şifre (min 8 karakter)" required id="NewPassword" pattern=".{8,}" title="En az 8 karakter girin" />
                <span class="toggle-password" onclick="togglePassword('NewPassword', this)">👁️</span>
            </div>

            <div class="password-wrapper">
                <input type="password" name="ConfirmPassword" placeholder="Yeni Şifre Tekrar" required id="ConfirmPassword" pattern=".{8,}" title="En az 8 karakter girin" />
                <span class="toggle-password" onclick="togglePassword('ConfirmPassword', this)">👁️</span>
            </div>

            <button type="submit">Şifreyi Güncelle</button>
        </form>

        @if (!ViewData.ModelState.IsValid)
        {
            <div class="error-message">
                @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                {
                    <p>@error.ErrorMessage</p>
                }
            </div>
        }

        <a href="@Url.Action("Login", "LoginSignUp")" class="link">Girişe Dön</a>
    </div>
</div>

<script>
    function togglePassword(inputId, icon) {
        const passwordInput = document.getElementById(inputId);
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.textContent = "🙈";
        } else {
            passwordInput.type = "password";
            icon.textContent = "👁️";
        }
    }
</script>
